@page "/node"
@inject QubicBackendService Backend

<h4><i class="bi bi-hdd-rack me-2"></i>Computor Operation</h4>
<p class="text-muted">Governance, CCF proposals, and direct node management.</p>

<div class="row g-3">
    @if (CanBroadcast)
    {
        <div class="col-md-6 col-lg-4">
            <a href="/tx/governance" class="text-decoration-none">
                <div class="card h-100 hub-card">
                    <div class="card-body d-flex align-items-start gap-3">
                        <i class="bi bi-bank fs-2 text-primary"></i>
                        <div>
                            <h5 class="card-title mb-1">Governance</h5>
                            <p class="card-text text-muted small mb-0">GQMProp proposals and revenue donation</p>
                        </div>
                    </div>
                </div>
            </a>
        </div>
        <div class="col-md-6 col-lg-4">
            <a href="/tx/ccf" class="text-decoration-none">
                <div class="card h-100 hub-card">
                    <div class="card-body d-flex align-items-start gap-3">
                        <i class="bi bi-currency-exchange fs-2 text-primary"></i>
                        <div>
                            <h5 class="card-title mb-1">CCF</h5>
                            <p class="card-text text-muted small mb-0">Computor-Controlled Fund proposals and transfers</p>
                        </div>
                    </div>
                </div>
            </a>
        </div>
    }
    @if (IsDirectNetwork)
    {
        <div class="col-md-6 col-lg-4">
            <a href="/node/peers" class="text-decoration-none">
                <div class="card h-100 hub-card">
                    <div class="card-body d-flex align-items-start gap-3">
                        <i class="bi bi-diagram-3 fs-2 text-primary"></i>
                        <div>
                            <h5 class="card-title mb-1">Node Peers</h5>
                            <p class="card-text text-muted small mb-0">View connected peer IP addresses from the node</p>
                        </div>
                    </div>
                </div>
            </a>
        </div>
        <div class="col-md-6 col-lg-4">
            <a href="/node/management" class="text-decoration-none">
                <div class="card h-100 hub-card">
                    <div class="card-body d-flex align-items-start gap-3">
                        <i class="bi bi-sliders fs-2 text-primary"></i>
                        <div>
                            <h5 class="card-title mb-1">Node Management</h5>
                            <p class="card-text text-muted small mb-0">Send operator commands to manage the connected node</p>
                        </div>
                    </div>
                </div>
            </a>
        </div>
    }
    @if (!CanBroadcast && !IsDirectNetwork)
    {
        <div class="col-12">
            <div class="alert alert-warning">
                These features require the <strong>Rpc</strong> or <strong>DirectNetwork</strong> backend. Switch in <a href="/settings">Settings</a>.
            </div>
        </div>
    }
</div>

@code {
    private bool IsDirectNetwork => Backend.ActiveBackend == QueryBackend.DirectNetwork;
    private bool CanBroadcast => Backend.ActiveBackend is QueryBackend.Rpc or QueryBackend.DirectNetwork;
}
